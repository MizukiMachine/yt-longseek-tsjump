# TDD Development Plan - YouTube Long Seek & Netherlands Time Jump Extension

## Red → Green → Refactor サイクルに従った開発計画

### Phase 1: プロジェクト基盤
- [ ] Test 1.1: package.jsonが存在し、必要な依存関係が定義されている
- [ ] Test 1.2: TypeScript設定が適切に設定されている
- [ ] Test 1.3: テスト環境（Vitest）が動作する

### Phase 2: 時刻パース機能（コア機能）
- [ ] Test 2.1: "14:30" 形式の時刻文字列を秒数に変換できる
- [ ] Test 2.2: "14:30:45" 形式の時刻文字列を秒数に変換できる
- [ ] Test 2.3: 不正な形式の時刻文字列でエラーを投げる
- [ ] Test 2.4: 24時間を超える時刻でエラーを投げる
- [ ] Test 2.5: 60分/60秒を超える値でエラーを投げる

### Phase 3: オランダ時刻計算機能
- [ ] Test 3.1: 現在のオランダ時刻を取得できる
- [ ] Test 3.2: 入力時刻とオランダ現在時刻の差分を計算できる
- [ ] Test 3.3: 未来時刻が入力された場合、自動で昨日に調整できる
- [ ] Test 3.4: DST（夏時間）を考慮した正確な時刻計算ができる

### Phase 4: YouTube動画制御機能
- [ ] Test 4.1: YouTube動画要素を取得できる
- [ ] Test 4.2: 動画のシーク可能範囲を取得できる
- [ ] Test 4.3: 指定秒数だけ動画をシークできる
- [ ] Test 4.4: シーク範囲外の場合、適切にクランプする
- [ ] Test 4.5: 広告中の判定ができる

### Phase 5: キーボードショートカット機能
- [ ] Test 5.1: ±10分のシーク機能が動作する
- [ ] Test 5.2: ±30分のシーク機能が動作する  
- [ ] Test 5.3: ±60分のシーク機能が動作する
- [ ] Test 5.4: 入力フォーカス中はショートカットが無効化される
- [ ] Test 5.5: 広告中はショートカットが無効化される

### Phase 6: 設定管理機能
- [ ] Test 6.1: デフォルト設定を読み込める
- [ ] Test 6.2: 設定を保存・読み込みできる
- [ ] Test 6.3: シーク時間をカスタマイズできる
- [ ] Test 6.4: 自動昨日調整をオン/オフできる

### Phase 7: UI機能
- [ ] Test 7.1: 時刻入力フィールドが適切に動作する
- [ ] Test 7.2: ジャンプボタンクリックで時刻ジャンプが実行される
- [ ] Test 7.3: Enterキーでも時刻ジャンプが実行される
- [ ] Test 7.4: 設定変更が保存される
- [ ] Test 7.5: エラー時に適切な通知が表示される

### Phase 8: Chrome拡張機能統合
- [ ] Test 8.1: manifest.jsonが適切な権限設定を持つ
- [ ] Test 8.2: background scriptが動作する
- [ ] Test 8.3: content scriptがYouTubeページで動作する
- [ ] Test 8.4: popupが適切に表示される
- [ ] Test 8.5: キーボードコマンドが登録される

### Phase 9: 統合テスト
- [ ] Test 9.1: キーボードショートカットからシークまでの完全フロー
- [ ] Test 9.2: ポップアップから時刻ジャンプまでの完全フロー
- [ ] Test 9.3: 設定変更の永続化とリロード後の動作
- [ ] Test 9.4: エラーケースでの適切な通知表示

## 実装方針
1. 各テストは最小限の失敗するテストとして書く
2. テストを通すための最小限のコードのみ実装する
3. リファクタリングは必ずテストが通った後に行う
4. 一度に一つのテストのみに集中する
5. 構造的変更と機能的変更は分離してコミットする

## 次のアクション
Test 1.1から開始し、Red → Green → Refactor サイクルを厳密に守る